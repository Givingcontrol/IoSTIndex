# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml




schedules:
- cron: "0 * * * *"
  displayName: Daily midnight build
  branches:
    include:
    - master
    
pool:
  vmImage: 'ubuntu-latest'

steps:



- script: |
    wget -O devices.csv $CSVURL
    git diff devices.csv
    git config --local user.name "Azure Pipelines"
    git config --local user.email "azuredevops@microsoft.com"
    git add devices.csv
    git commit -m "Updating devices.csv"
  displayName: 'Check for modifications'

- task: InstallSSHKey@0
  inputs:
    knownHostsEntry: '$(KNOWN_HOST)'
    sshPublicKey: '$(DEPLOY)'
    #sshPassphrase: # Optional
    sshKeySecureFile: deploy_key
